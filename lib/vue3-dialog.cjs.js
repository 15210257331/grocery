"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue");var O;const x=typeof window<"u",P=t=>typeof t=="string",j=()=>{};x&&((O=window?.navigator)!=null&&O.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function N(t){return typeof t=="function"?t():e.unref(t)}function T(t){return t}function B(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function L(t){var n;const o=N(t);return(n=o?.$el)!=null?n:o}const C=x?window:void 0;function _(...t){let n,o,u,s;if(P(t[0])||Array.isArray(t[0])?([o,u,s]=t,n=C):[n,o,u,s]=t,!n)return j;Array.isArray(o)||(o=[o]),Array.isArray(u)||(u=[u]);const l=[],d=()=>{l.forEach(i=>i()),l.length=0},f=(i,p,v,g)=>(i.addEventListener(p,v,g),()=>i.removeEventListener(p,v,g)),a=e.watch(()=>[L(n),N(s)],([i,p])=>{d(),i&&l.push(...o.flatMap(v=>u.map(g=>f(i,v,g,p))))},{immediate:!0,flush:"post"}),r=()=>{a(),d()};return B(r),r}const w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},I="__vueuse_ssr_handlers__";w[I]=w[I]||{};function V(t={}){const{type:n="page",touch:o=!0,resetOnTouchEnds:u=!1,initialValue:s={x:0,y:0},window:l=C,eventFilter:d}=t,f=e.ref(s.x),a=e.ref(s.y),r=e.ref(null),i=c=>{n==="page"?(f.value=c.pageX,a.value=c.pageY):n==="client"?(f.value=c.clientX,a.value=c.clientY):n==="movement"&&(f.value=c.movementX,a.value=c.movementY),r.value="mouse"},p=()=>{f.value=s.x,a.value=s.y},v=c=>{if(c.touches.length>0){const m=c.touches[0];n==="page"?(f.value=m.pageX,a.value=m.pageY):n==="client"&&(f.value=m.clientX,a.value=m.clientY),r.value="touch"}},g=c=>d===void 0?i(c):d(()=>i(c),{}),y=c=>d===void 0?v(c):d(()=>v(c),{});return l&&(_(l,"mousemove",g,{passive:!0}),_(l,"dragover",g,{passive:!0}),o&&n!=="movement"&&(_(l,"touchstart",y,{passive:!0}),_(l,"touchmove",y,{passive:!0}),u&&_(l,"touchend",p,{passive:!0}))),{x:f,y:a,sourceType:r}}var b;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(b||(b={}));var $=Object.defineProperty,E=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,D=(t,n,o)=>n in t?$(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,X=(t,n)=>{for(var o in n||(n={}))M.call(n,o)&&D(t,o,n[o]);if(E)for(var o of E(n))Q.call(n,o)&&D(t,o,n[o]);return t};const Y={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};X({linear:T},Y);const h=Symbol("DialogToken");function A(){const{x:t,y:n}=V(),{dialogs:o,createDialog:u,disposeDialog:s,getDialogId:l}=e.inject(h),d=e.computed(()=>o&&l?o[l()]:null);function f(r,i){return u(r,{...i,pointerX:t.value,pointerY:n.value}),d?.value?.promise}function a(r){r?d?.value?.resolve(r):d?.value?.reject("取消"),s()}return{open:f,close:a}}const H=t=>(e.pushScopeId("data-v-36b5147c"),t=t(),e.popScopeId(),t),R=["id"],W={class:"dialog-header"},F={class:"title"},U=H(()=>e.createElementVNode("svg",{t:"1679295681396",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3779",width:"26",height:"26"},[e.createElementVNode("path",{d:"M572.16 512l183.466667-183.04a42.666667 42.666667 0 1 0-60.586667-60.586667L512 451.84l-183.04-183.466667a42.666667 42.666667 0 0 0-60.586667 60.586667l183.466667 183.04-183.466667 183.04a42.666667 42.666667 0 0 0 0 60.586667 42.666667 42.666667 0 0 0 60.586667 0l183.04-183.466667 183.04 183.466667a42.666667 42.666667 0 0 0 60.586667 0 42.666667 42.666667 0 0 0 0-60.586667z","p-id":"3780"})],-1)),z=[U],G={class:"dialog-body"},K=e.defineComponent({__name:"DialogContainer",props:{modalId:{type:String},title:{type:String,default:"dialog"},width:{type:Number,default:600},pointerX:{type:Number},pointerY:{type:Number}},setup(t){const n=t,{dialogs:o,createDialog:u,disposeDialog:s,getDialogId:l}=e.inject(h),d=e.computed(()=>{const p=(document.documentElement.clientWidth-n.width)/2,v=n.pointerX?n.pointerX-p+"px":"0px",g=n.pointerY?n.pointerY-100+"px":"0px";return{width:`${n.width}px`,marginLeft:`-${n.width/2}px`,transform:`scale(${a.value?"1":"0"})`,transformOrigin:`${v} ${g} 0px`}}),f=e.computed(()=>o[l()]),a=e.computed(()=>o[l()]?.visible);function r(p){p.target.className==="dialog-overlay"&&i()}function i(){f.value.reject("取消"),s()}return(p,v)=>(e.openBlock(),e.createElementBlock("div",{class:"dialog-overlay",id:t.modalId,style:e.normalizeStyle({opacity:e.unref(a)?"1":"0"}),onClick:r},[e.createElementVNode("div",{role:"dialog",tabindex:"-1",class:"dialog",style:e.normalizeStyle(e.unref(d))},[e.createElementVNode("div",W,[e.createElementVNode("p",F,e.toDisplayString(t.title),1),e.createElementVNode("i",{class:"close-icon",onClick:i},z)]),e.createElementVNode("div",G,[e.renderSlot(p.$slots,"default",{},void 0,!0)])],4)],12,R))}});const q=(t,n)=>{const o=t.__vccOpts||t;for(const[u,s]of n)o[u]=s;return o},J=q(K,[["__scopeId","data-v-36b5147c"]]);function Z(){let t=0;const n=()=>`__modal__${t++}`,o=e.reactive({});function u(a,r){let i,p;const v=n(),g=new Promise((S,k)=>{i=S,p=k}),{props:y,...c}=r,m=d(a,c,y);o[v]={component:m,config:r,visible:!1,promise:g,reject:p,resolve:i},setTimeout(()=>{o[v].visible=!0},100)}function s(){const a=l(),r=o[a];r&&(r.visible=!1,setTimeout(()=>{delete o[a]},300))}function l(){const a=Object.keys(o).filter(r=>!!o[r]);return a.length>0?a[0]:""}function d(a,r,i){return e.defineComponent({render(){return e.createVNode(J,r,{default:()=>[e.createVNode(a,i,null)]})}})}return e.provide(h,{dialogs:o,createDialog:u,disposeDialog:s,getDialogId:l}),{dialogList:e.computed(()=>Object.keys(o).filter(r=>!!o[r]).map(r=>({id:r,...o[r],component:e.toRaw(o[r].component)})))}}const ee=e.defineComponent({__name:"DialogProvider",setup(t){const{dialogList:n}=Z();return(o,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.renderSlot(o.$slots,"default"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),s=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(s.component),{key:s.id}))),128))],64))}});exports.DialogProvider=ee;exports.useDialog=A;
